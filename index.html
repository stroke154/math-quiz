<!DOCTYPE html>
<html lang="en">
<head>
  <title>Simple Math Quiz for Kids</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  
  <!-- Tailwind CSS for styling -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
  
  <style>
    .hidden {
      display: none;
    }
    
    .quiz-container {
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .fade-in {
      animation: fadeIn 0.5s;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    .timer-bar {
      height: 10px;
      background-color: #3b82f6;
      transition: width 1s linear;
    }
    
    .problem-display {
      font-size: 2.5rem;
      font-weight: bold;
    }
    
    .button-primary {
      background-color: #3b82f6;
      color: white;
      padding: 10px 20px;
      border-radius: 9999px;
      font-weight: bold;
      transition: background-color 0.2s;
    }
    
    .button-primary:hover {
      background-color: #2563eb;
    }
    
    .button-secondary {
      background-color: #6b7280;
      color: white;
      padding: 10px 20px;
      border-radius: 9999px;
      font-weight: bold;
      transition: background-color 0.2s;
    }
    
    .button-secondary:hover {
      background-color: #4b5563;
    }
    
    .difficulty-option {
      border: 2px solid #e5e7eb;
      border-radius: 0.375rem;
      padding: 1rem;
      margin-bottom: 0.75rem;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .difficulty-option:hover {
      border-color: #93c5fd;
    }
    
    .difficulty-option.selected {
      border-color: #3b82f6;
      background-color: #eff6ff;
    }
    
    .correct {
      background-color: #d1fae5;
    }
    
    .incorrect {
      background-color: #fee2e2;
    }
  </style>
</head>
<body class="bg-blue-50 min-h-screen">
  <div class="quiz-container bg-white shadow-md rounded-lg my-8">
    <!-- Loading Screen -->
    <div id="loading-screen" class="text-center p-8">
      <h2 class="text-xl font-semibold text-blue-700">Loading Math Quiz...</h2>
      <p id="error-message" class="text-red-600 mt-4 hidden"></p>
    </div>
    
    <!-- Start Screen -->
    <div id="start-screen" class="p-6 hidden">
      <h1 class="text-3xl font-bold text-center text-blue-700 mb-2">Math Quiz for Kids</h1>
      <p class="text-gray-600 text-center mb-6">Test your math skills with these fun problems!</p>
      
      <div class="mb-6">
        <h2 class="text-xl font-semibold mb-3 text-gray-800">Select Difficulty:</h2>
        <div id="difficulty-options">
          <div class="difficulty-option selected" data-difficulty="easy">
            <div class="flex justify-between items-center">
              <span class="font-bold text-lg text-gray-800">Easy</span>
              <span class="text-blue-600 text-xl">âœ“</span>
            </div>
            <p class="text-gray-600 mt-1 text-sm">Numbers up to 10, addition and subtraction, 60 seconds</p>
          </div>
          
          <div class="difficulty-option" data-difficulty="medium">
            <div class="flex justify-between items-center">
              <span class="font-bold text-lg text-gray-800">Medium</span>
            </div>
            <p class="text-gray-600 mt-1 text-sm">Numbers up to 20, addition, subtraction, and multiplication, 90 seconds</p>
          </div>
          
          <div class="difficulty-option" data-difficulty="hard">
            <div class="flex justify-between items-center">
              <span class="font-bold text-lg text-gray-800">Hard</span>
            </div>
            <p class="text-gray-600 mt-1 text-sm">Numbers up to 50, all operations including division, 120 seconds</p>
          </div>
        </div>
      </div>
      
      <div class="text-center pt-4">
        <button id="start-button" class="button-primary">Start Quiz</button>
      </div>
    </div>
    
    <!-- Quiz Screen -->
    <div id="quiz-screen" class="p-6 hidden">
      <!-- Timer -->
      <div class="mb-4">
        <div class="flex justify-between items-center mb-1">
          <span class="text-gray-700 font-medium">Time Left:</span>
          <span id="timer-display" class="font-bold text-blue-600">1:00</span>
        </div>
        <div class="w-full bg-gray-200 rounded-full h-2.5">
          <div id="timer-bar" class="timer-bar rounded-full" style="width: 100%"></div>
        </div>
      </div>
      
      <!-- Problem -->
      <div class="bg-white p-6 rounded-lg shadow-md">
        <h2 id="problem-counter" class="text-xl font-bold mb-4 text-center text-gray-800">Problem 1 of 10</h2>
        <div id="problem-display" class="problem-display text-center font-bold mb-6 text-blue-700">5 + 3 = ?</div>
        
        <form id="answer-form" class="flex flex-col items-center">
          <input id="answer-input" type="number" class="w-32 text-2xl text-center p-2 border-2 border-blue-300 rounded-md focus:border-blue-500 focus:outline-none mb-4" autofocus>
          <button type="submit" id="submit-button" class="button-primary">Submit</button>
        </form>
      </div>
    </div>
    
    <!-- Results Screen -->
    <div id="results-screen" class="p-6 hidden">
      <h2 class="text-2xl font-bold mb-2 text-center text-gray-800">Quiz Results</h2>
      
      <div class="text-center mb-4">
        <div id="score-display" class="text-5xl font-bold mb-2 text-blue-600">0/10</div>
        <div id="percentage-display" class="text-xl mb-4 text-blue-600">0%</div>
        <div id="message-display" class="text-gray-700 font-medium">Nice try! Let's practice more and try again!</div>
      </div>
      
      <!-- Problems review -->
      <div class="mt-6 mb-6">
        <h3 class="text-xl font-semibold mb-4 text-gray-700">Review Problems:</h3>
        <div id="review-container" class="space-y-3">
          <!-- Problems review will be generated here -->
        </div>
      </div>
      
      <!-- Buttons -->
      <div class="flex justify-between mt-6">
        <button id="menu-button" class="button-secondary">Main Menu</button>
        <button id="retry-button" class="button-primary">Try Again</button>
      </div>
    </div>
  </div>
  
  <script>
    // Wait for DOM to be fully loaded
    document.addEventListener('DOMContentLoaded', function() {
      try {
        // Show the loading screen for 1 second for a smooth transition
        setTimeout(function() {
          document.getElementById('loading-screen').classList.add('hidden');
          document.getElementById('start-screen').classList.remove('hidden');
          document.getElementById('start-screen').classList.add('fade-in');
        }, 1000);
        
        // Game configuration
        const DIFFICULTY = {
          easy: { 
            name: 'Easy', 
            maxNumber: 10, 
            operations: ['+', '-'], 
            timeLimit: 60 
          },
          medium: { 
            name: 'Medium', 
            maxNumber: 20, 
            operations: ['+', '-', 'Ã—'], 
            timeLimit: 90 
          },
          hard: { 
            name: 'Hard', 
            maxNumber: 50, 
            operations: ['+', '-', 'Ã—', 'Ã·'], 
            timeLimit: 120 
          }
        };
        
        // Game state
        let state = {
          difficulty: 'easy',
          problems: [],
          currentProblemIndex: 0,
          score: 0,
          timeLeft: DIFFICULTY.easy.timeLimit,
          answers: {},
          timer: null
        };
        
        // DOM elements
        const difficultyOptions = document.querySelectorAll('.difficulty-option');
        const startButton = document.getElementById('start-button');
        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultsScreen = document.getElementById('results-screen');
        const problemCounter = document.getElementById('problem-counter');
        const problemDisplay = document.getElementById('problem-display');
        const answerForm = document.getElementById('answer-form');
        const answerInput = document.getElementById('answer-input');
        const timerDisplay = document.getElementById('timer-display');
        const timerBar = document.getElementById('timer-bar');
        const menuButton = document.getElementById('menu-button');
        const retryButton = document.getElementById('retry-button');
        const scoreDisplay = document.getElementById('score-display');
        const percentageDisplay = document.getElementById('percentage-display');
        const messageDisplay = document.getElementById('message-display');
        const reviewContainer = document.getElementById('review-container');
        
        // Set up difficulty selection
        difficultyOptions.forEach(option => {
          option.addEventListener('click', function() {
            // Remove selected class from all options
            difficultyOptions.forEach(opt => opt.classList.remove('selected'));
            
            // Add selected class to clicked option
            this.classList.add('selected');
            
            // Update game state
            state.difficulty = this.dataset.difficulty;
            state.timeLeft = DIFFICULTY[state.difficulty].timeLimit;
          });
        });
        
        // Helper functions
        function getRandomNumber(min, max) {
          return Math.floor(Math.random() * (max - min + 1)) + min;
        }
        
        function generateProblem(difficulty) {
          const { maxNumber, operations } = DIFFICULTY[difficulty];
          const operation = operations[Math.floor(Math.random() * operations.length)];
          
          let num1, num2, answer;
          
          switch (operation) {
            case '+':
              num1 = getRandomNumber(1, maxNumber);
              num2 = getRandomNumber(1, maxNumber);
              answer = num1 + num2;
              break;
            case '-':
              num1 = getRandomNumber(1, maxNumber);
              num2 = getRandomNumber(1, num1); // Ensure positive result
              answer = num1 - num2;
              break;
            case 'Ã—':
              num1 = getRandomNumber(1, Math.floor(maxNumber / 5));
              num2 = getRandomNumber(1, Math.floor(maxNumber / 5));
              answer = num1 * num2;
              break;
            case 'Ã·':
              num2 = getRandomNumber(1, 10);
              answer = getRandomNumber(1, Math.floor(maxNumber / 5));
              num1 = num2 * answer; // Ensure clean division
              break;
            default:
              num1 = getRandomNumber(1, maxNumber);
              num2 = getRandomNumber(1, maxNumber);
              answer = num1 + num2;
          }
          
          return { num1, num2, operation, answer };
        }
        
        function formatTime(seconds) {
          const minutes = Math.floor(seconds / 60);
          const secs = seconds % 60;
          return `${minutes}:${secs < 10 ? '0' : ''}${secs}`;
        }
        
        function updateTimerDisplay() {
          timerDisplay.textContent = formatTime(state.timeLeft);
          
          // Update timer bar
          const percentage = (state.timeLeft / DIFFICULTY[state.difficulty].timeLimit) * 100;
          timerBar.style.width = `${percentage}%`;
          
          // Change color when time is running out
          if (state.timeLeft <= 10) {
            timerDisplay.classList.remove('text-blue-600');
            timerDisplay.classList.add('text-red-600', 'animate-pulse');
            timerBar.style.backgroundColor = '#ef4444';
          } else {
            timerDisplay.classList.remove('text-red-600', 'animate-pulse');
            timerDisplay.classList.add('text-blue-600');
            timerBar.style.backgroundColor = '#3b82f6';
          }
        }
        
        function displayCurrentProblem() {
          const problem = state.problems[state.currentProblemIndex];
          problemCounter.textContent = `Problem ${state.currentProblemIndex + 1} of ${state.problems.length}`;
          problemDisplay.textContent = `${problem.num1} ${problem.operation} ${problem.num2} = ?`;
          answerInput.value = '';
          answerInput.focus();
        }
        
        function startTimer() {
          clearInterval(state.timer);
          updateTimerDisplay();
          
          state.timer = setInterval(() => {
            state.timeLeft--;
            updateTimerDisplay();
            
            if (state.timeLeft <= 0) {
              clearInterval(state.timer);
              showResults();
            }
          }, 1000);
        }
        
        function startQuiz() {
          // Generate 10 problems
          state.problems = Array(10).fill().map(() => generateProblem(state.difficulty));
          state.currentProblemIndex = 0;
          state.score = 0;
          state.timeLeft = DIFFICULTY[state.difficulty].timeLimit;
          state.answers = {};
          
          // Show quiz screen
          startScreen.classList.add('hidden');
          quizScreen.classList.remove('hidden');
          quizScreen.classList.add('fade-in');
          
          // Display first problem
          displayCurrentProblem();
          
          // Start timer
          startTimer();
        }
        
        function submitAnswer(userAnswer) {
          const currentProblem = state.problems[state.currentProblemIndex];
          const isCorrect = parseInt(userAnswer) === currentProblem.answer;
          
          // Record answer
          state.answers[state.currentProblemIndex] = { 
            userAnswer: userAnswer, 
            isCorrect: isCorrect 
          };
          
          // Update score
          if (isCorrect) {
            state.score++;
          }
          
          // Move to next problem or show results
          if (state.currentProblemIndex < state.problems.length - 1) {
            state.currentProblemIndex++;
            displayCurrentProblem();
          } else {
            showResults();
          }
        }
        
        function showResults() {
          // Stop timer
          clearInterval(state.timer);
          
          // Hide quiz screen
          quizScreen.classList.add('hidden');
          
          // Update results
          const percentage = (state.score / state.problems.length) * 100;
          scoreDisplay.textContent = `${state.score}/${state.problems.length}`;
          percentageDisplay.textContent = `${percentage.toFixed(0)}%`;
          
          // Update message based on score
          if (percentage >= 90) {
            messageDisplay.textContent = 'Amazing! You're a math genius! ðŸ†';
            scoreDisplay.className = 'text-5xl font-bold mb-2 text-green-600';
            percentageDisplay.className = 'text-xl mb-4 text-green-600';
          } else if (percentage >= 70) {
            messageDisplay.textContent = 'Great job! Very impressive! ðŸŒŸ';
            scoreDisplay.className = 'text-5xl font-bold mb-2 text-blue-600';
            percentageDisplay.className = 'text-xl mb-4 text-blue-600';
          } else if (percentage >= 50) {
            messageDisplay.textContent = 'Good effort! Keep practicing! ðŸ‘';
            scoreDisplay.className = 'text-5xl font-bold mb-2 text-yellow-600';
            percentageDisplay.className = 'text-xl mb-4 text-yellow-600';
          } else {
            messageDisplay.textContent = 'Nice try! Let's practice more and try again! ðŸ’ª';
            scoreDisplay.className = 'text-5xl font-bold mb-2 text-red-600';
            percentageDisplay.className = 'text-xl mb-4 text-red-600';
          }
          
          // Generate review items
          reviewContainer.innerHTML = '';
          state.problems.forEach((problem, index) => {
            const answer = state.answers[index] || {};
            const { num1, num2, operation, answer: correctAnswer } = problem;
            
            const reviewItem = document.createElement('div');
            reviewItem.className = `p-3 rounded-md ${answer.isCorrect ? 'correct' : 'incorrect'}`;
            
            const content = document.createElement('div');
            content.className = 'flex justify-between items-center';
            
            const problemText = document.createElement('div');
            problemText.className = 'font-medium';
            problemText.textContent = `${num1} ${operation} ${num2} = ${correctAnswer}`;
            
            const answerContainer = document.createElement('div');
            answerContainer.className = 'flex items-center';
            
            if (answer.userAnswer !== undefined) {
              const userAnswerText = document.createElement('span');
              userAnswerText.className = `mr-2 ${answer.isCorrect ? 'text-green-700' : 'text-red-700'}`;
              userAnswerText.textContent = `Your answer: ${answer.userAnswer}`;
              answerContainer.appendChild(userAnswerText);
            }
            
            const resultIcon = document.createElement('span');
            resultIcon.className = `${answer.isCorrect ? 'text-green-700' : 'text-red-700'} text-xl`;
            resultIcon.textContent = answer.isCorrect ? 'âœ“' : 'âœ—';
            answerContainer.appendChild(resultIcon);
            
            content.appendChild(problemText);
            content.appendChild(answerContainer);
            reviewItem.appendChild(content);
            reviewContainer.appendChild(reviewItem);
          });
          
          // Show results screen
          resultsScreen.classList.remove('hidden');
          resultsScreen.classList.add('fade-in');
        }
        
        function goToMainMenu() {
          // Reset state
          clearInterval(state.timer);
          
          // Hide results screen
          resultsScreen.classList.add('hidden');
          
          // Show start screen
          startScreen.classList.remove('hidden');
          startScreen.classList.add('fade-in');
        }
        
        // Event listeners
        startButton.addEventListener('click', startQuiz);
        
        answerForm.addEventListener('submit', function(e) {
          e.preventDefault();
          const userAnswer = answerInput.value.trim();
          if (userAnswer === '') return;
          submitAnswer(userAnswer);
        });
        
        menuButton.addEventListener('click', goToMainMenu);
        
        retryButton.addEventListener('click', function() {
          resultsScreen.classList.add('hidden');
          startQuiz();
        });
        
      } catch (error) {
        console.error('Error initializing quiz:', error);
        document.getElementById('loading-screen').innerHTML = `
          <h2 class="text-xl font-semibold text-red-700">Error Loading Math Quiz</h2>
          <p class="text-red-600 mt-4">${error.message || 'An unknown error occurred.'}</p>
          <p class="mt-2">Please try refreshing the page.</p>
        `;
      }
    });
  </script>
</body>
</html>
